"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1981],{3905:function(e,t,o){o.d(t,{Zo:function(){return d},kt:function(){return h}});var n=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var c=n.createContext({}),l=function(e){var t=n.useContext(c),o=t;return e&&(o="function"==typeof e?e(t):r(r({},t),e)),o},d=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=l(o),h=a,m=p["".concat(c,".").concat(h)]||p[h]||u[h]||i;return o?n.createElement(m,r(r({ref:t},d),{},{components:o})):n.createElement(m,r({ref:t},d))}));function h(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=o.length,r=new Array(i);r[0]=p;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var l=2;l<i;l++)r[l]=o[l];return n.createElement.apply(null,r)}return n.createElement.apply(null,o)}p.displayName="MDXCreateElement"},8606:function(e,t,o){o.r(t),o.d(t,{assets:function(){return d},contentTitle:function(){return c},default:function(){return h},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return u}});var n=o(7462),a=o(3366),i=(o(7294),o(3905)),r=["components"],s={sidebar_position:6},c="Look Aside Cache",l={unversionedId:"Editor/Components/Look Aside Cache",id:"Editor/Components/Look Aside Cache",title:"Look Aside Cache",description:"Introduction",source:"@site/docs/Editor/Components/Look Aside Cache.md",sourceDirName:"Editor/Components",slug:"/Editor/Components/Look Aside Cache",permalink:"/docs/docs/Editor/Components/Look Aside Cache",editUrl:"https://github.com/mage-io/docs/blob/master/docs/Editor/Components/Look Aside Cache.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Redis",permalink:"/docs/docs/Editor/Components/Redis"},next:{title:"Monitoring",permalink:"/docs/docs/Editor/Components/Monitoring"}},d={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Technical specification",id:"technical-specification",level:2},{value:"How To use",id:"how-to-use",level:2},{value:"Step 1: Creating connection",id:"step-1-creating-connection",level:3},{value:"Step 2: Linking modules",id:"step-2-linking-modules",level:3},{value:"Step 3: Configuring endpoints",id:"step-3-configuring-endpoints",level:3},{value:"Inputs and Outputs",id:"inputs-and-outputs",level:2},{value:"Further Read",id:"further-read",level:2},{value:"Limitations",id:"limitations",level:2}],p={toc:u};function h(e){var t=e.components,s=(0,a.Z)(e,r);return(0,i.kt)("wrapper",(0,n.Z)({},p,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"look-aside-cache"},"Look Aside Cache"),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Overview",src:o(7873).Z,width:"1194",height:"786"}),"\nLook-Aside cache module, as the name suggests, is a strategy module that enables the user to enhance a group of API endpoints by automatically sourcing data from a layered look-aside cache. "),(0,i.kt)("p",null,"Look aside caches are extremely useful when we have a read-heavy application which can have difficulty in supporting requests from one single database and require a cache layer to servce data more efficiently (for ex: using a combination of ",(0,i.kt)("inlineCode",{parentName:"p"},"Redis")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"SQL"),")."),(0,i.kt)("h2",{id:"technical-specification"},"Technical specification"),(0,i.kt)("p",null,"Generally, a look aside cache (LAC) combines two data sources (like ",(0,i.kt)("inlineCode",{parentName:"p"},"Redis")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"SQL"),") to fetch the data. LACs are deployed to speed up the load times for services by combining a fast but limited (and generally temporary) data storage technology with a more resilient but slow read service like SQL."),(0,i.kt)("p",null,"Mage's Look aside cache takes it one step further by providing a layered cache module for the services. The Look aside cache then loops through all the data sources one by one and fetch data from the first layer that returns the data."),(0,i.kt)("h2",{id:"how-to-use"},"How To use"),(0,i.kt)("p",null,"After adding the Look-aside component to canvas, we can start using it by linking other data modules to the output of the Look aside cache component."),(0,i.kt)("h3",{id:"step-1-creating-connection"},"Step 1: Creating connection"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Overview",src:o(1996).Z,width:"1736",height:"750"}),"\nFor any connection method that look-aside cache needs to wrap (let's say an SQL's GetUser method), Look-aside cache needs to itself have another connection method created. To configure this method, double click on the look-aside component and create a new connection."),(0,i.kt)("h3",{id:"step-2-linking-modules"},"Step 2: Linking modules"),(0,i.kt)("p",null,"Once all the methods for look aside are created, one can simply link all the data sources which would be needed for look-aside cache to confirm (i.e. all data sources for all the endpoints created)."),(0,i.kt)("h3",{id:"step-3-configuring-endpoints"},"Step 3: Configuring endpoints"),(0,i.kt)("p",null,"To configure the component, double click on the look-aside component to open the configuration section."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"If you haven't added the connection yet, follow ",(0,i.kt)("a",{parentName:"p",href:"#step-1-creating-connection"},"Step 1"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Under the configuration section, double click on the Method properties (edit) button to open the configuration section.\n",(0,i.kt)("img",{alt:"Configure methods",src:o(2244).Z,width:"1254",height:"942"})))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"For every method created, there will be an expandable section shown. Expand the relevant endpoint and configure the sections accordingly."),(0,i.kt)("li",{parentName:"ul"},"Select the data source and their corresponding method in order for each and every component.\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"The order of choosing these components is important since the first method is supposed to be called first. For a typical application, we generally would want the fasted (but limited) data source to be the first data source, followed by the slower ones.")),(0,i.kt)("h2",{id:"inputs-and-outputs"},"Inputs and Outputs"),(0,i.kt)("p",null,"Look aside cache inherits all connection properties (i.e. all input and output properties) from its connected data component methods. Therefore, every method will follow the same request/response arguments as its connected data source."),(0,i.kt)("p",null,"Since thera are multiple Data sources and methods configured for every method of Look-aside component, the Look-aside cache component will only source the data from the last data source in the list of data sources."),(0,i.kt)("p",null,"For example, if there are two data sources connected to Look-aside cache: One component called ",(0,i.kt)("inlineCode",{parentName:"p"},"userCache")," which is a ",(0,i.kt)("inlineCode",{parentName:"p"},"Redis")," module and another one is ",(0,i.kt)("inlineCode",{parentName:"p"},"userPersistence")," which is an ",(0,i.kt)("inlineCode",{parentName:"p"},"SQL")," module.\nThe methods for both of these are defined as below:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"userCache"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"GetPopularUser(userName string, roll integer) (string)")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"userPersistence"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"GetDataRaw(userName string, roll integer) (entity.User)"))),(0,i.kt)("p",null,"and the look-aside cache has a method named ",(0,i.kt)("inlineCode",{parentName:"p"},"GetUserData")," which is configured to source its data from both of these components, the look aside cache will inherit it's request and response parameters based on the ",(0,i.kt)("inlineCode",{parentName:"p"},"userPersistence")," module and the the method will have following signature:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"GetUserData(userName string, roll integer) (*entity.User)\n")),(0,i.kt)("h2",{id:"further-read"},"Further Read"),(0,i.kt)("p",null,"Look aside cache is a very common industry pattern for implementing services. To further read more about how look aside caches can be used, refer to the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://tanzu.vmware.com/content/blog/an-introduction-to-look-aside-vs-inline-caching-patterns#:~:text=In%20the%20look%2Daside%20caching,code%20to%20the%20cache%20servers"},"VMWare Blog")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.spring.io/spring-boot-data-geode-build/1.1.x/reference/html5/guides/caching-look-aside.html"},"Spring official")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/architecture/patterns/cache-aside"},"Microsoft Docs"))),(0,i.kt)("h2",{id:"limitations"},"Limitations"),(0,i.kt)("p",null,"Mage's look aside component is currently unable to persist data back to the lower layers i.e. the responsibility to write data back to cache currently lies with the user."),(0,i.kt)("p",null,"While this would be resolved in upcoming features, look aside cache is currently supported in it's entirety for only read purpose and does not perform any write operation. If you need the functionality soon, do reach out to us via Discord."),(0,i.kt)("p",null,"Additionally, Mage also allows only the components which have the same request/response method arguments, or use a string based request/response arguments (like Redis' response). For other modules, we need to transform the request/response to make use of Look aside cache. however, this can be done easily using the ",(0,i.kt)("a",{parentName:"p",href:"#further-read"},(0,i.kt)("inlineCode",{parentName:"a"},"Arbitrary Function"))," component which allows us to write our own logic."))}h.isMDXComponent=!0},1996:function(e,t,o){t.Z=o.p+"assets/images/configure-9736eb1e37a0b319b7be5e2658f73663.png"},2244:function(e,t,o){t.Z=o.p+"assets/images/configure_method-fee83b5c69339e73999d08e87cecc147.png"},7873:function(e,t,o){t.Z=o.p+"assets/images/overview-13caf30df964925ed4b5abba9e8817ff.png"}}]);